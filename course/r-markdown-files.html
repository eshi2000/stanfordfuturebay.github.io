<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1.3 R Markdown Files | Shaping the Future of the Bay: Intro to Urban Data Analytics in R</title>
  <meta name="description" content="1.3 R Markdown Files | Shaping the Future of the Bay: Intro to Urban Data Analytics in R" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="1.3 R Markdown Files | Shaping the Future of the Bay: Intro to Urban Data Analytics in R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1.3 R Markdown Files | Shaping the Future of the Bay: Intro to Urban Data Analytics in R" />
  
  
  

<meta name="author" content="Stanford Future Bay Initiative" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rstudio-interface.html"/>
<link rel="next" href="github.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://bay.stanford.edu">Stanford Future Bay Initiative</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="software-setup.html"><a href="software-setup.html"><i class="fa fa-check"></i><b>1.1</b> Software Setup</a></li>
<li class="chapter" data-level="1.2" data-path="rstudio-interface.html"><a href="rstudio-interface.html"><i class="fa fa-check"></i><b>1.2</b> RStudio Interface</a></li>
<li class="chapter" data-level="1.3" data-path="r-markdown-files.html"><a href="r-markdown-files.html"><i class="fa fa-check"></i><b>1.3</b> R Markdown Files</a></li>
<li class="chapter" data-level="1.4" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>1.4</b> GitHub</a></li>
<li class="chapter" data-level="1.5" data-path="reading-files.html"><a href="reading-files.html"><i class="fa fa-check"></i><b>1.5</b> Reading files</a></li>
<li class="chapter" data-level="1.6" data-path="saving-files.html"><a href="saving-files.html"><i class="fa fa-check"></i><b>1.6</b> Saving files</a></li>
<li class="chapter" data-level="1.7" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>1.7</b> Loops</a></li>
<li class="chapter" data-level="1.8" data-path="manipulating-data.html"><a href="manipulating-data.html"><i class="fa fa-check"></i><b>1.8</b> Manipulating data</a></li>
<li class="chapter" data-level="1.9" data-path="geospatial-data.html"><a href="geospatial-data.html"><i class="fa fa-check"></i><b>1.9</b> Geospatial data</a></li>
<li class="chapter" data-level="1.10" data-path="census-data.html"><a href="census-data.html"><i class="fa fa-check"></i><b>1.10</b> Census data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="populations.html"><a href="populations.html"><i class="fa fa-check"></i><b>2</b> Populations</a><ul>
<li class="chapter" data-level="2.1" data-path="spatial-joins.html"><a href="spatial-joins.html"><i class="fa fa-check"></i><b>2.1</b> Spatial joins</a></li>
<li class="chapter" data-level="2.2" data-path="equity-analysis.html"><a href="equity-analysis.html"><i class="fa fa-check"></i><b>2.2</b> Equity analysis</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Shaping the Future of the Bay: Intro to Urban Data Analytics in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-markdown-files" class="section level2">
<h2><span class="header-section-number">1.3</span> R Markdown Files</h2>
<p>The two most common types of R code documents are .R or .Rmd files. First, keep in mind that in either case they’re really just text files, but fed into R development environments like RStudio, they end up “doing R things”. A normal .R file is literally just code top to bottom to execute. An .Rmd file intersperses code with space for non-code commentary, which is especially useful for creating web documents just like the one you’re viewing right now. Since we want to teach you how to create such public-facing documents for a wide variety of uses, and because it’s often convenient anyway to intersperse code with explanatory text, we’re going to use .Rmd files as the preferred format. But that means we have a few different formatting details to explain that, from the onset, may look strange.</p>
<p>You should have a new .Rmd file open that has a standard template. Usually, when I am starting a new .Rmd, I immediately erase this template and start to copy/paste script from other existing .Rmd files, but for now it’s useful to review this “scaffolding” to learn.</p>
<p>At the top, between two <code>---</code> lines, is something called a YAML header (I leave you to Google to your heart’s desire for more insight, and just give you the basic orientation here), which feeds high-level information to what’s called a “knitting” operation (explained soon), which takes your document and does the “web development” (or conversion to other end formats like PDF) for you. For example, the YAML header is where you can type a preset table of contents parameter so you never have to bother with designing a table of contents in HTML. Just know there are many cool parameters you can learn to use up there to make your web page even cooler, which you can look up when appropriate. Generally, besides many nifty HTML tricks, there are two fundamental things you should always do in the YAML:</p>
<ul>
<li>Give your .Rmd file a title, which will render at the top of the web document. This doesn’t have to be the same as the file name you give to your .Rmd file.</li>
<li>You should specify your date based on when you last edited this code. As an advanced technique, you can type the following: <code>date: "Last updated: September 02, 2020"</code>. This will automatically update the date based on when you “knit”. There are three important concepts here. First, if you are not inside of a “chunk”, which we’ll get to soon, then generally you can’t execute code. But if you do a pair of backticks, and include “r” right after the first backtick, then it’s like you’ve created a “mini chunk” that lets you run one line of code (as if you were typing it directly into the Console). So what you’ve put right into the YAML is the text output of the following code: <code>format(Sys.Date(), '%B %d, %Y')</code>, which you are free to try typing directly into the Console. Now this code itself is a function within a function. <code>Sys.Date()</code> is a standard function in base R (which means you have access to it anytime) which does exactly what you think it does; try it directly in the Console on its own. Nothing is required between the parentheses for certain self-evident functions like this. Finally, <code>format()</code> can do a lot of generally useful formatting things depending on what you feed in as parameters (it’ll do nothing on its own). When <code>format()</code> is given a date object, which is what <code>Sys.Date()</code> produces, as its first parameter, followed by a string in which you specify how you’d like to format the date, then it can convert something like “2020-09-14” into “September 14, 2020”. The exact schema itself is something you have to find guidance on; try Googling “r date format”and typing <code>?format</code> in the Console.</li>
</ul>
<p>Now we’ll explain chunks which are a special formatting in .Rmd files to contain code you want to execute. Below I’m copying the first chunk you get in the template. A chunk is created by a pair of three backticks, and a bracketed set of parameters right after the first pair. Note that you can quickly create a chunk using <code>Ctrl+Alt+I</code>, one of the most common shortcuts I use.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r-markdown-files.html#cb1-1"></a>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>Note that on this web page, you don’t see the pair of three backticks, but if you were to view the .Rmd file that created this webpage, you’d see the backticks and bracketed parameters. So one of the nice features of an .Rmd file is that you can publish documents with chunks nicely rendered to display code, and if there are outputs to the code, you can easily choose to display them right below the chunk.</p>
<p>I’m actually going to go ahead and show a second chunk that has the same effect but two different formatting choices:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="r-markdown-files.html#cb2-1"></a><span class="kw">library</span>(knitr)</span>
<span id="cb2-2"><a href="r-markdown-files.html#cb2-2"></a>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo =</span> T)</span></code></pre></div>
<p>The first chunk has one line of code while the second has 2 lines.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="r-markdown-files.html#cb3-1"></a><span class="kw">library</span>(knitr)</span>
<span id="cb3-2"><a href="r-markdown-files.html#cb3-2"></a>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo =</span> T, <span class="dt">warning =</span> F, <span class="dt">message =</span> F)</span></code></pre></div>
<p>It also has <code>setup</code> and <code>warning = F</code> written after <code>r</code>. I’ll explain <code>warning = F</code> soon. The word you put right after <code>r</code> basically just names the chunk. This can help with quick navigation using the drop-down menu on the bottom of this script window; otherwise I usually don’t name my chunks out of laziness. It might be easier to organize using headers in the non-chunk areas using hashtags, as you’ve seen me use already. <code>Ctrl+Shift+O</code> opens a Google Doc style outline on the right tab and can help with navigating your document.</p>
<p>I assume you already know how to install packages and the importance of <code>library()</code> to load packages. <code>knitr</code> is basically a must for turning .Rmd to HTML. <code>opts_chunk$set()</code> comes from <code>knitr</code>, and it sets global options for how every chunk is displayed in your HTML.</p>
<ul>
<li><code>echo = T</code> (you can type <code>T/F</code> or <code>TRUE/FALSE</code>) shows the code in a gray box. Keep in mind you can see how this looks in the web page version.</li>
<li><code>warning = F</code> and <code>message = F</code> prevents a lot of annoying red messages from showing up in the web page, that otherwise you sometimes see in the RStudio console. Trust me this is a good idea to not show in your web pages.</li>
<li>Another useful one we’re setting as a global option is <code>include = F</code>. This would execute code in the background but not show the code itself on the web page. Usually the chunk above would not be included (but you would need to run the code itself in the background).</li>
<li>There are other potentially useful parameters you can Google.</li>
<li>Note these any of these can otherwise be individually listed after commas in the <code>{r}</code> bracket, affecting only the one chunk. That’s why the chunk above had <code>warning = F</code>, to prevent a warning that might show up when running <code>library(knitr)</code> (just a versioning notice).</li>
</ul>
<p>Next you would usually have a “loading libraries” chunk. I usually do libraries and options in one chunk.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="r-markdown-files.html#cb4-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb4-2"><a href="r-markdown-files.html#cb4-2"></a><span class="kw">library</span>(plotly)</span>
<span id="cb4-3"><a href="r-markdown-files.html#cb4-3"></a><span class="kw">library</span>(sf)</span>
<span id="cb4-4"><a href="r-markdown-files.html#cb4-4"></a><span class="kw">library</span>(mapview)</span>
<span id="cb4-5"><a href="r-markdown-files.html#cb4-5"></a><span class="kw">library</span>(leaflet)</span>
<span id="cb4-6"><a href="r-markdown-files.html#cb4-6"></a><span class="kw">library</span>(tigris)</span>
<span id="cb4-7"><a href="r-markdown-files.html#cb4-7"></a><span class="kw">library</span>(censusapi)</span>
<span id="cb4-8"><a href="r-markdown-files.html#cb4-8"></a></span>
<span id="cb4-9"><a href="r-markdown-files.html#cb4-9"></a><span class="kw">options</span>(</span>
<span id="cb4-10"><a href="r-markdown-files.html#cb4-10"></a>  <span class="dt">tigris_class =</span> <span class="st">&quot;sf&quot;</span></span>
<span id="cb4-11"><a href="r-markdown-files.html#cb4-11"></a>)</span>
<span id="cb4-12"><a href="r-markdown-files.html#cb4-12"></a></span>
<span id="cb4-13"><a href="r-markdown-files.html#cb4-13"></a><span class="kw">Sys.setenv</span>(<span class="dt">CENSUS_KEY=</span><span class="st">&quot;c8aa67e4086b4b5ce3a8717f59faa9a28f611dab&quot;</span>)</span></code></pre></div>
<p>This happens to be the “essential” packages in my tutorial, and we’ll go over each one by one.</p>
<p>For <code>options()</code>, there are plenty you might end up learning to use, specific to different packages. <code>tigris_class = "sf"</code> just happens to be an important one for <code>tigris</code> functions, which we’ll explain later. I’ll also explain the <code>Sys.setenv()</code> function later in the <code>censusapi</code> section.</p>
<p>Otherwise, there’s not much else unique to .Rmd files. Most of the action of course happens in the code chunks themselves. The writing that’s happening in non-chunk areas is in “markdown” language, like an easy HTML, and you can find really good cheat sheets online for <strong>bold</strong>, <em>italics</em>, tables, etc. which honestly I just look up when I want to do something specific.</p>
<p>Lastly, just note there’s a “Knit” button next to the white gear, and that’s what you ultimately click to export HTML. If successful, it’ll put a <code>rbasics.html</code> into your working directory. You are welcome to try it, though you don’t have to push this back to GitHub.</p>
<p>If you need a deeper explanation of these and many other fundamental concepts we’ll skip over in this course, start <a href="https://r4ds.had.co.nz/r-markdown.html">here</a>, then do more Googling.</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rstudio-interface.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="github.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "none",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": false,
"info": false
});
});
</script>

</body>

</html>
